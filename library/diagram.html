<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sơ đồ Lớp (Class Diagram) - Hệ thống Thư viện</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            padding: 2rem;
            height: 3000px; /* Tăng chiều cao đáng kể */
            width: 2500px; /* Tăng chiều rộng đáng kể */
        }
        .class-box {
            position: absolute;
            background-color: white;
            border: 1px solid #90c5ff;
            border-radius: 0.375rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            z-index: 10;
            min-width: 320px; /* Đặt chiều rộng tối thiểu */
            max-width: 500px; /* Đặt chiều rộng tối đa */
        }
        .class-header {
            background-color: #d1e8ff;
            padding: 0.5rem 0.75rem;
            font-weight: bold;
            border-top-left-radius: 0.375rem;
            border-top-right-radius: 0.375rem;
            border-bottom: 1px solid #90c5ff;
        }
        .class-header.abstract {
            font-style: italic;
        }
        .class-content {
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            line-height: 1.4;
        }
        .class-content div {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap; /* Ngăn xuống dòng */
        }
        .class-content.attributes {
            border-bottom: 1px solid #bee0ff;
        }
        .visibility {
            font-family: monospace;
            font-size: 1rem;
            width: 1rem;
            text-align: center;
            flex-shrink: 0;
        }
        .visibility.private { color: #e3342f; }
        .visibility.public { color: #38c172; }
        .visibility.package { color: #f6993f; }

        #diagram-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 2500px;
            height: 3000px;
            z-index: 1;
        }
    </style>
</head>
<body>
    <h1 class="text-2xl font-bold text-center text-gray-800 mb-8">Sơ đồ Lớp (Class Diagram) - Hệ thống Thư viện (Bố cục Rộng)</h1>
    
    <!-- SVG Container cho các đường kẻ -->
    <svg id="diagram-svg" width="2500" height="3000">
        <defs>
            <!-- Mũi tên kế thừa (Tam giác rỗng) -->
            <marker id="inheritance"
                viewBox="0 0 10 10"
                refX="0" refY="5"
                markerWidth="8" markerHeight="8"
                orient="auto-start-reverse">
                <path d="M 0 0 L 10 5 L 0 10 z" fill="white" stroke="#6b7280" stroke-width="1.5" />
            </marker>
            
            <!-- Mũi tên tập hợp (Hình thoi rỗng) -->
            <marker id="aggregation"
                viewBox="0 0 10 10"
                refX="0" refY="5"
                markerWidth="10" markerHeight="10"
                orient="auto-start-reverse">
                <path d="M 5 0 L 10 5 L 5 10 L 0 5 z" fill="white" stroke="#6b7280" stroke-width="1.5" />
            </marker>
        </defs>

        <!-- === CÁC ĐƯỜNG KẺ (Bố cục rộng) === -->
        
        <!-- Kế thừa (Inheritance) -->
        <!-- Staff -> Users (Từ đỉnh Staff -> đáy Users) -->
        <line x1="260" y1="700" x2="960" y2="580" stroke="#6b7280" stroke-width="1.5" marker-end="url(#inheritance)" />
        <!-- Borrower -> Users (Từ đỉnh Borrower -> đáy Users) -->
        <line x1="2040" y1="700" x2="960" y2="580" stroke="#6b7280" stroke-width="1.5" marker-end="url(#inheritance)" />
        <!-- Librarian -> Staff (Từ đỉnh Librarian -> đáy Staff) -->
        <line x1="180" y1="1300" x2="260" y2="1200" stroke="#6b7280" stroke-width="1.5" marker-end="url(#inheritance)" />
        <!-- Clerk -> Staff (Từ đỉnh Clerk -> đáy Staff) -->
        <line x1="680" y1="1300" x2="260" y2="1200" stroke="#6b7280" stroke-width="1.5" marker-end="url(#inheritance)" />

        <!-- Tập hợp (Aggregation) -->
        <!-- Borrower <>- Loan (Từ cạnh phải Borrower -> cạnh trái Loan) -->
        <line x1="2220" y1="850" x2="1660" y2="250" stroke="#6b7280" stroke-width="1.5" marker-start="url(#aggregation)" />
        
        <!-- Library (Hub) <>- ... (Từ Library ở trung tâm) -->
        <!-- Library <>- Users (Từ đỉnh Library -> đáy Users) -->
        <line x1="1260" y1="2000" x2="960" y2="580" stroke="#6b7280" stroke-width="1.5" stroke-dasharray="4 4" marker-start="url(#aggregation)" />
        <!-- Library <>- Staff (Từ đỉnh Library -> đáy Staff) -->
        <line x1="1100" y1="2000" x2="260" y2="1200" stroke="#6b7280" stroke-width="1.5" stroke-dasharray="4 4" marker-start="url(#aggregation)" />
        <!-- Library <>- Librarian (Từ đỉnh Library -> đáy Librarian) -->
        <line x1="1100" y1="2000" x2="180" y2="1500" stroke="#6b7280" stroke-width="1.5" stroke-dasharray="4 4" marker-start="url(#aggregation)" />
        <!-- Library <>- Clerk (Từ đỉnh Library -> đáy Clerk) -->
        <line x1="1100" y1="2000" x2="680" y2="1350" stroke="#6b7280" stroke-width="1.5" stroke-dasharray="4 4" marker-start="url(#aggregation)" />
        <!-- Library <>- Borrower (Từ đỉnh Library -> đáy Borrower) -->
        <line x1="1420" y1="2000" x2="2040" y2="1200" stroke="#6b7280" stroke-width="1.5" stroke-dasharray="4 4" marker-start="url(#aggregation)" />
        <!-- Library <>- Loan (Từ đỉnh Library -> đáy Loan) -->
        <line x1="1420" y1="2000" x2="1820" y2="800" stroke="#6b7280" stroke-width="1.5" stroke-dasharray="4 4" marker-start="url(#aggregation)" />
        <!-- Library <>- Books (Từ đỉnh Library -> đáy Books) -->
        <line x1="1420" y1="2000" x2="1820" y2="1250" stroke="#6b7280" stroke-width="1.5" stroke-dasharray="4 4" marker-start="url(#aggregation)" />
        
        <!-- Liên kết (Association) -->
        <!-- Loan -> Users (Từ cạnh trái Loan -> cạnh phải Users) -->
        <line x1="1660" y1="200" x2="1120" y2="350" stroke="#6b7280" stroke-width="1.5" stroke-dasharray="4 4" />
        <!-- Loan -> Books (Từ đáy Loan -> đỉnh Books) -->
        <line x1="1820" y1="800" x2="1820" y2="1100" stroke="#6b7280" stroke-width="1.5" stroke-dasharray="4 4" />

    </svg>

    <!-- === CÁC LỚP (Bố cục khoa học MỚI RỘNG HƠN) === -->

    <!-- Hàng 1: Lớp cơ sở -->
    <!-- Users (Abstract) -->
    <div class="class-box" style="top: 20px; left: 800px;">
        <div class="class-header abstract">Users (Abstract)</div>
        <div class="class-content attributes">
            <div><span class="visibility private">-</span> user_id: int</div>
            <div><span class="visibility private">-</span> user_name: String</div>
            <div><span class="visibility private">-</span> gender: char</div>
        </div>
        <div class="class-content methods">
            <div><span class="visibility package">~</span> Users()</div>
            <div><span class="visibility package">~</span> Users(int, String, char)</div>
            <div><span class="visibility public">+</span> SearchBookbyTitle(String): ArrayList&lt;Books&gt;</div>
            <div><span class="visibility public">+</span> SearchBookbySubject(String): ArrayList&lt;Books&gt;</div>
            <div><span class="visibility public">+</span> SearchBookbyAuthor(String): ArrayList&lt;Books&gt;</div>
            <div><span class="visibility public">+</span> GetId(): int</div>
            <div><span class="visibility public">+</span> GetName(): String</div>
            <div><span class="visibility public">+</span> GetGender(): char</div>
            <div><span class="visibility public">+</span> SetId(int): void</div>
            <div><span class="visibility public">+</span> SetName(String): void</div>
            <div><span class="visibility public">+</span> SetGender(char): void</div>
            <div><span class="visibility public">+</span> PrintInformation(): String</div>
            <div><span class="visibility package">~</span> SetFineAmount(double): void</div>
            <div><span class="visibility package">~</span> SetFineStatus(boolean): boolean</div>
            <div><span class="visibility package">~</span> UpdateLoanInfo(Loan, int): void</div>
            <div><span class="visibility package">~</span> GetFineStatus(): boolean</div>
            <div><span class="visibility package">~</span> AddLoanInfo(Loan): boolean</div>
            <div><span class="visibility public">+</span> <i>ViewInformation(ArrayList&lt;Loan&gt;, int): String</i></div>
        </div>
    </div>

    <!-- Hàng 2: Lớp con cấp 1 -->
    <!-- Staff -->
    <div class="class-box" style="top: 700px; left: 100px;">
        <div class="class-header">Staff</div>
        <div class="class-content methods">
            <div><span class="visibility package">~</span> Staff(int, String, char)</div>
            <div><span class="visibility public">+</span> CheckOutItem(int, Users, ArrayList&lt;Books&gt;, Loan, ArrayList&lt;Loan&gt;): boolean</div>
            <div><span class="visibility public">+</span> CheckInItem(String, int, Users, ArrayList&lt;Books&gt;, List&lt;Loan&gt;): boolean</div>
            <div><span class="visibility public">+</span> ViewInformation(ArrayList&lt;Loan&gt;, int): String</div>
            <div><span class="visibility public">+</span> AddaBorrower(ArrayList&lt;Users&gt;, String, char, String, String): boolean</div>
            <div><span class="visibility public">+</span> UpdatePerosnalInformation(ArrayList&lt;Users&gt;, String, int, int): boolean</div>
            <div><span class="visibility public">+</span> RenewItem(int, ArrayList&lt;Books&gt;, int): void</div>
            <div><span class="visibility package">~</span> PayFine(int, ArrayList&lt;Users&gt;, ArrayList&lt;Loan&gt;): void</div>
        </div>
    </div>

    <!-- Borrower -->
    <div class="class-box" style="top: 700px; left: 1880px;">
        <div class="class-header">Borrower</div>
        <div class="class-content attributes">
            <div><span class="visibility private">-</span> address: String</div>
            <div><span class="visibility private">-</span> telephone: String</div>
            <div><span class="visibility private">-</span> fine_defaulter: boolean</div>
            <div><span class="visibility private">-</span> fine: double</div>
            <div><span class="visibility private">-</span> BookLoans: ArrayList&lt;Loan&gt;</div>
        </div>
        <div class="class-content methods">
            <div><span class="visibility package">~</span> Borrower()</div>
            <div><span class="visibility package">~</span> Borrower(int, String, char, String, String, boolean, double)</div>
            <div><span class="visibility public">+</span> GetFineStatus(): boolean</div>
            <div><span class="visibility public">+</span> GetFineAmout(): double</div>
            <div><span class="visibility public">+</span> GetAddress(): String</div>
            <div><span class="visibility public">+</span> GetTelephone(): String</div>
            <div><span class="visibility public">+</span> SetFineStatus(boolean): boolean</div>
            <div><span class="visibility public">+</span> SetTelephone(String): boolean</div>
            <div><span class="visibility public">+</span> SetAddress(String): boolean</div>
            <div><span class="visibility public">+</span> SetFineAmount(double): void</div>
            <div><span class="visibility public">+</span> SetName(String): void</div>
            <div><span class="visibility public">+</span> SetGender(char): void</div>
            <div><span class="visibility public">+</span> AddLoanInfo(Loan): boolean</div>
            <div><span class="visibility public">+</span> AllLoansofUser(ArrayList&lt;Loan&gt;): void</div>
            <div><span class="visibility public">+</span> UpdateLoanInfo(Loan, int): void</div>
            <div><span class="visibility public">+</span> ViewInformation(ArrayList&lt;Loan&gt;, int): String</div>
        </div>
    </div>

    <!-- Hàng 3: Lớp con cấp 2 -->
    <!-- Librarian -->
    <div class="class-box" style="top: 1300px; left: 20px;">
        <div class="class-header">Librarian</div>
        <div class="class-content methods">
            <div><span class="visibility package">~</span> Librarian(int, String, char)</div>
            <div><span class="visibility public">+</span> AddBook(ArrayList&lt;Books&gt;, String, String, String, int): void</div>
            <div><span class="visibility public">+</span> DeleteBook(ArrayList&lt;Books&gt;, int): boolean</div>
            <div><span class="visibility public">+</span> ChangeInfo(ArrayList&lt;Books&gt;, int, int, String, int): void</div>
        </div>
    </div>

    <!-- Clerk -->
    <div class="class-box" style="top: 1300px; left: 520px;">
        <div class="class-header">Clerk</div>
        <div class="class-content methods">
            <div><span class="visibility package">~</span> Clerk(int, String, char)</div>
        </div>
    </div>

    <!-- Cụm thực thể (Bên phải) -->
    <!-- Loan -->
    <div class="class-box" style="top: 20px; left: 1660px;">
        <div class="class-header">Loan</div>
        <div class="class-content attributes">
            <div><span class="visibility private">-</span> loanId: int</div>
            <div><span class="visibility private">-</span> issue_date: Date</div>
            <div><span class="visibility private">-</span> due_date: Date</div>
            <div><span class="visibility private">-</span> return_date: Date</div>
            <div><span class="visibility private">-</span> borrower: Users</div>
            <div><span class="visibility private">-</span> borrowed_book: Books</div>
            <div><span class="visibility private">-</span> fine_status: String</div>
            <div><span class="visibility private">-</span> returned_status: boolean</div>
        </div>
        <div class="class-content methods">
            <div><span class="visibility package">~</span> Loan()</div>
            <div><span class="visibility package">~</span> Loan(int)</div>
            <div><span class="visibility package">~</span> Loan(int, int, int, boolean, String, Date, Date, Date)</div>
            <div><span class="visibility package">~</span> Loan(int, Users, Books, String, boolean, Date, Date, Date)</div>
            <div><span class="visibility public">+</span> GetaBookId(): int</div>
            <div><span class="visibility public">+</span> GetFineStatus(): String</div>
            <div><span class="visibility public">+</span> GetLoanId(): int</div>
            <div><span class="visibility public">+</span> getReturnDate(): Date</div>
            <div><span class="visibility public">+</span> getDueDate(): Date</div>
            <div><span class="visibility public">+</span> getIssueDate(): Date</div>
            <div><span class="visibility public">+</span> GetaBook(): Books</div>
            <div><span class="visibility public">+</span> GetaBorrowerId(): int</div>
            <div><span class="visibility public">+</span> Getborrower(): Users</div>
            <div><span class="visibility public">+</span> GetStatus(): boolean</div>
            <div><span class="visibility public">+</span> SetReturnedDate(Date): void</div>
            <div><span class="visibility public">+</span> SetaBook(Books): void</div>
            <div><span class="visibility public">+</span> SetaBorrower(Users): void</div>
            <div><span class="visibility public">+</span> SetReturnStatus(boolean): void</div>
            <div><span class="visibility public">+</span> SetLoan(Loan): void</div>
            <div><span class="visibility public">+</span> SetFineStatus(String): void</div>
            <div><span class="visibility public">+</span> GetLoan(ArrayList&lt;Books&gt;, Borrower, ArrayList&lt;Users&gt;, Staff, ArrayList&lt;Loan&gt;): boolean</div>
            <div><span class="visibility public">+</span> CalculateFine(): double</div>
            <div><span class="visibility package">~</span> PrintLoanInfo(): String</div>
        </div>
    </div>

    <!-- Books -->
    <div class="class-box" style="top: 1100px; left: 1660px;">
        <div class="class-header">Books</div>
        <div class="class-content attributes">
            <div><span class="visibility private">-</span> book_id: int</div>
            <div><span class="visibility private">-</span> author: String</div>
            <div><span class="visibility private">-</span> title: String</div>
            <div><span class="visibility private">-</span> subject: String</div>
            <div><span class="visibility private">-</span> quantity: int</div>
        </div>
        <div class="class-content methods">
            <div><span class="visibility package">~</span> Books()</div>
            <div><span class="visibility package">~</span> Books(int, String, String, String, int)</div>
            <div><span class="visibility public">+</span> SetBookId(int): void</div>
            <div><span class="visibility public">+</span> SetAuthor(String): void</div>
            <div><span class="visibility public">+</span> SetTitle(String): void</div>
            <div><span class="visibility public">+</span> SetQuantity(int): void</div>
            <div><span class="visibility public">+</span> SetSubject(String): void</div>
            <div><span class="visibility public">+</span> GetTitle(): String</div>
            <div><span class="visibility public">+</span> GetAuthor(): String</div>
            <div><span class="visibility public">+</span> GetBookId(): int</div>
            <div><span class="visibility public">+</span> GetSubject(): String</div>
            <div><span class="visibility public">+</span> GetaBook(): Books</div>
            <div><span class="visibility public">+</span> GetQuantity(): int</div>
            <div><span class="visibility public">+</span> ChekcAvailability(int): boolean</div>
            <div><span class="visibility public">+</span> DecreaseQuantity(): void</div>
            <div><span class="visibility public">+</span> IncreaseQuantity(): void</div>
            <div><span class="visibility public">+</span> PrintInformation(): String</div>
        </div>
    </div>

    <!-- Hàng 4: Lớp điều khiển (Hub) -->
    <!-- Library -->
    <div class="class-box" style="top: 2000px; left: 1000px;">
        <div class="class-header">Library</div>
        <div class="class-content attributes">
            <div><span class="visibility public">+</span> <i>UsersList: ArrayList&lt;Users&gt; (static)</i></div>
            <div><span class="visibility public">+</span> <i>BooksList: ArrayList&lt;Books&gt; (static)</i></div>
            <div><span class="visibility public">+</span> <i>LibrarianList: ArrayList&lt;Librarian&gt; (static)</i></div>
            <div><span class="visibility public">+</span> <i>ClerkList: ArrayList&lt;Clerk&gt; (static)</i></div>
            <div><span class="visibility public">+</span> <i>LoanList: ArrayList&lt;Loan&gt; (static)</i></div>
        </div>
        <div class="class-content methods">
            <div><span class="visibility package">~</span> Library()</div>
            <div><span class="visibility package">~</span> IsBorrowerPresent(int): boolean</div>
            <div><span class="visibility package">~</span> IsClerkPresent(int): boolean</div>
            <div><span class="visibility package">~</span> IsLibrarianPresent(int): boolean</div>
            <div><span class="visibility package">~</span> CheckLoanofUser(int, int): String</div>
            <div><span class="visibility package">~</span> ClerkSearchBookbyTitle(String, int): ArrayList&lt;Books&gt;</div>
            <div><span class="visibility package">~</span> ClerkSearchBookbyAuthor(String, int): ArrayList&lt;Books&gt;</div>
            <div><span class="visibility package">~</span> ClerkSearchBookbySubject(String, int): ArrayList&lt;Books&gt;</div>
            <div><span class="visibility package">~</span> AddNewBorrower(String, char, String, String, int): boolean</div>
            <div><span class="visibility package">~</span> ClerkUpdatingInfo(String, int, int, int): Boolean</div>
            <div><span class="visibility package">~</span> ClerkRecordFine(int, int): void</div>
            <div><span class="visibility package">~</span> ClerkCheckInItem(String, int, int, int): void</div>
            <div><span class="visibility package">~</span> ClerkCheckOutItem(int, int, int): void</div>
            <div><span class="visibility package">~</span> ClerkRenewItem(int, int, int): void</div>
            <div><span class="visibility package">~</span> LibrarianCheckLoanofUser(int, int): String</div>
            <div><span class="visibility package">~</span> LibrarianSearchBookbyTitle(String, int): ArrayList&lt;Books&gt;</div>
            <div><span class="visibility package">~</span> LibrarianSearchBookbyAuthor(String, int): ArrayList&lt;Books&gt;</div>
            <div><span class="visibility package">~</span> LibrarianSearchBookbySubject(String, int): ArrayList&lt;Books&gt;</div>
            <div><span class="visibility package">~</span> AddNewBorrowerLibrarian(String, char, String, String, int): boolean</div>
            <div><span class="visibility package">~</span> LibrarianUpdatingInfo(String, int, int, int): Boolean</div>
            <div><span class="visibility package">~</span> LibrarianRecordFine(int, int): void</div>
            <div><span class="visibility package">~</span> LibrarianCheckInItem(String, int, int, int): void</div>
            <div><span class="visibility package">~</span> LibrarianCheckOutItem(int, int, int): void</div>
            <div><span class="visibility package">~</span> LibrarianRenewItem(int, int, int): void</div>
            <div><span class="visibility package">~</span> LibrarianAddNewBook(String, String, String, int, int): void</div>
            <div><span class="visibility package">~</span> LibrarianDeleteBook(int, int): boolean</div>
            <div><span class="visibility package">~</span> LibrarianUpdateBookInfo(int, int, String, int, int): void</div>
            <div><span class="visibility public">+</span> <i>main(String[]): void (static)</i></div>
        </div>
    </div>

</body>
</html>